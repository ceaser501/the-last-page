<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>Moments We Shared</title>
    <!-- ÌòÑÏû¨ ÎàÑÎùΩÎêòÏñ¥ ÏûàÎäî ÏΩîÎìú -->
    <link
      href="https://fonts.googleapis.com/css2?family=Cedarville+Cursive&family=Homemade+Apple&family=Dancing+Script:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Patrick+Hand&family=Shadows+Into+Light&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.css"
    />
    <link rel="stylesheet" href="style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
    <!-- flatpickr CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css"
    />
    <script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://lbjqzhqqxuqyvglslpne.supabase.co/storage/v1/object/public/public-config//config.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/musicmetadata/2.0.2/musicmetadata.min.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
  </head>
  <body>
    <!-- Î≤öÍΩÉ Ïï†ÎãàÎ©îÏù¥ÏÖò Ïª®ÌÖåÏù¥ÎÑà -->
    <div class="sakura-container" id="sakura-container"></div>

    <!-- Ìôà ÏïÑÏù¥ÏΩò -->
    <button id="home-icon" title="Ï≤òÏùåÏúºÎ°ú">
      <i class="fas fa-home"></i>
    </button>

    <!-- ÏùåÌëú ÏïÑÏù¥ÏΩò -->
    <button id="music-icon" title="Î∞∞Í≤ΩÏùåÏïÖ">
      <i class="fas fa-music"></i>
    </button>

    <!-- Îã§ÌÅ¨Î™®Îìú ÌÜ†Í∏Ä Î≤ÑÌäº -->
    <button id="dark-mode-toggle" title="Îã§ÌÅ¨Î™®Îìú Ï†ÑÌôò">
      <i class="fas fa-sun"></i>
    </button>

    <!-- Î©îÏù∏ ÏùåÏïÖ ÌîåÎ†àÏù¥Ïñ¥ -->
    <div id="main-music-player" class="main-music-wrapper">
      <div class="main-music-container">
        <div id="main-player-bg-artwork"></div>
        <div id="main-player-bg-layer"></div>
        <div id="main-player-container">
          <div id="main-player">
            <div id="main-album-art">
              <img src="" class="active" id="main-album-img" />
              <div id="main-buffer-box">Buffering ...</div>
            </div>
            <div id="main-player-track">
              <div id="main-track-info">
                <span id="main-track-name"></span>
                <span id="main-album-name"></span>
              </div>
              <div id="main-track-time">
                <div id="main-current-time"></div>
                <div id="main-track-length"></div>
              </div>
              <div id="main-seek-bar-container">
                <div id="main-seek-time"></div>
                <div id="main-s-hover"></div>
                <div id="main-seek-bar"></div>
              </div>
            </div>
            <div id="main-player-controls">
              <div class="control">
                <div class="button" id="main-music-toggle">
                  <i class="fas fa-volume-up"></i>
                </div>
              </div>
              <div class="control">
                <div class="button" id="main-prev-button">
                  <i class="fas fa-step-backward"></i>
                </div>
              </div>
              <div class="control">
                <div class="button" id="main-play-pause-button">
                  <i class="fas fa-play"></i>
                </div>
              </div>
              <div class="control">
                <div class="button" id="main-next-button">
                  <i class="fas fa-step-forward"></i>
                </div>
              </div>
              <div class="control">
                <div class="button" id="main-playlist-button">
                  <i class="fas fa-list"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Ïö∞Ï∏° ÏÉÅÎã® Î≤ÑÌäº ÏòÅÏó≠ -->
    <div class="top-right-buttons">
      <!-- D-Day Ïπ¥Ïö¥ÌÑ∞ (ÎÇòÏ§ëÏóê ÏÇ¨Ïö©) -->
      <div id="wedding-dday" class="dday-counter" style="display: none">
        <div class="dday-title">üíç Wedding D-Day</div>
        <div class="dday-time">
          <span class="dday-number" id="days">000</span>
          <span class="dday-unit">Ïùº</span>
          <span class="dday-number" id="hours">00</span>
          <span class="dday-unit">ÏãúÍ∞Ñ</span>
          <span class="dday-number" id="minutes">00</span>
          <span class="dday-unit">Î∂Ñ</span>
          <span class="dday-number" id="seconds">00</span>
          <span class="dday-unit">Ï¥à</span>
        </div>
      </div>

      <!-- Î°úÍ∑∏Ïù∏ Ï†Ñ Î≤ÑÌäºÎì§ -->
      <div id="before-login" class="auth-buttons">
        <!--
        <button id="signup-btn" class="auth-btn secondary">ÌöåÏõêÍ∞ÄÏûÖ</button>
        -->
        <button id="login-btn" class="auth-btn primary">Î°úÍ∑∏Ïù∏</button>
      </div>

      <!-- Î°úÍ∑∏Ïù∏ ÌõÑ Î≤ÑÌäºÎì§ -->
      <div id="after-login" class="auth-buttons" style="display: none">
        <span id="welcome-message">ÌÉúÏàòÎãò ÌôòÏòÅÌï©ÎãàÎã§.</span>
        <button id="write-post-btn" class="auth-btn primary">Í∏Ä Îì±Î°ù</button>
        <button
          id="bgm-upload-btn"
          class="auth-btn secondary"
          style="display: none"
        >
          BGM ÏÑ§Ï†ï
        </button>
        <button id="logout-btn" class="auth-btn secondary">Î°úÍ∑∏ÏïÑÏõÉ</button>
      </div>
    </div>

    <!-- Î©îÏù∏ ÏòÅÏó≠ -->
    <div class="main-content">
      <!-- ÌéòÏù¥ÏßÄ ÌÉÄÏù¥ÌãÄ -->
      <!--<div class="page-title">Moments of Us</div> -->

      <!-- ÏÉÅÎã® ÎÇ†Ïßú ÎÇôÏÑú -->
      <div class="date-graffiti">
        The last page of our past, and the first page of forever
      </div>

      <div class="garland-wrapper" id="garland-wrapper"></div>
    </div>

    <!-- ÏÉÅÏÑ∏ ÌåùÏóÖ ÏòÅÏó≠ -->
    <div id="popup-overlay" class="popup-overlay" style="display: none">
      <!-- ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò Î≤ÑÌäºÎì§ÏùÑ overlay Î†àÎ≤®Ïóê Î∞∞Ïπò -->
      <button id="popup-prev-btn" class="popup-nav">‚Äπ</button>
      <button id="popup-next-btn" class="popup-nav">‚Ä∫</button>

      <div class="detail-popup">
        <div class="popup-controls">
          <button id="popup-slideshow-btn" title="Ïä¨ÎùºÏù¥ÎìúÏáº">‚ñ∂</button>
          <button id="popup-fullscreen-btn" title="Ï†ÑÏ≤¥ÌôîÎ©¥">‚õ∂</button>
          <button id="popup-close-btn" title="Îã´Í∏∞">‚úï</button>
        </div>

        <div class="popup-left">
          <div id="popup-main-image-container" src=""></div>
          <div id="popup-thumbnails" class="thumbnail-list"></div>
        </div>
        <div class="popup-right">
          <!-- ÌåùÏóÖ ÎÇ¥Î∂Ä Ïö∞Ï∏° [ÏùåÏïÖ ÌîåÎ†àÏù¥Ïñ¥]-->
          <div class="music-wrapper">
            <div class="music-player-container">
              <div id="player-bg-artwork"></div>
              <div id="player-bg-layer"></div>
              <div id="player-container">
                <div id="player">
                  <div id="player-track">
                    <span id="album-name"></span>
                    <span id="track-name"></span>
                    <div id="track-time">
                      <div id="current-time"></div>
                      <div id="track-length"></div>
                    </div>
                    <div id="seek-bar-container">
                      <div id="seek-time"></div>
                      <div id="s-hover"></div>
                      <div id="seek-bar"></div>
                    </div>
                  </div>
                  <div id="player-content">
                    <div id="album-art">
                      <img
                        src="https://singhimalaya.github.io/Codepen/assets/img/album-arts/1.jpg"
                        class="active"
                        id="_1"
                      />
                      <img
                        src="https://singhimalaya.github.io/Codepen/assets/img/album-arts/2.jpg"
                        id="_2"
                      />
                      <img
                        src="https://singhimalaya.github.io/Codepen/assets/img/album-arts/3.jpg"
                        id="_3"
                      />
                      <img
                        src="https://singhimalaya.github.io/Codepen/assets/img/album-arts/4.jpg"
                        id="_4"
                      />
                      <img
                        src="https://singhimalaya.github.io/Codepen/assets/img/album-arts/5.jpg"
                        id="_5"
                      />
                      <div id="buffer-box">Buffering ...</div>
                    </div>
                    <div id="player-controls">
                      <div class="control">
                        <div class="button" id="play-previous">
                          <i class="fas fa-backward"></i>
                        </div>
                      </div>
                      <div class="control">
                        <div class="button" id="play-pause-button">
                          <i class="fas fa-play"></i>
                        </div>
                      </div>
                      <div class="control">
                        <div class="button" id="play-next">
                          <i class="fas fa-forward"></i>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="info-texts">
            <div id="popup-content-wrapper">
              <!-- ÌåùÏóÖ ÎÇ¥Î∂Ä Ïö∞Ï∏° [Ïç∏ÎÑ§Ïùº Ï†úÎ™©] (Ïà®ÍπÄ) -->
              <div
                id="popup-thumbnail-title"
                class="popup-meta-thumbnail"
                style="display: none"
              ></div>
              <!-- ÌåùÏóÖ ÎÇ¥Î∂Ä Ïö∞Ï∏° [Ï†úÎ™©]Í≥º Î≤ÑÌäºÎì§ -->
              <div class="popup-title-row">
                <div id="popup-title" class="popup-meta-title"></div>
                <div class="popup-action-buttons">
                  <button
                    id="popup-music-change-btn"
                    class="auth-btn control-btn-group primary"
                    style="display: none"
                  >
                    ÏùåÏïÖÎ≥ÄÍ≤Ω
                  </button>
                  <button
                    id="popup-add-media-btn"
                    class="auth-btn control-btn-group primary"
                    style="display: none"
                  >
                    ÌååÏùºÏóÖÎ°úÎìú
                  </button>
                  <button
                    id="popup-edit-btn"
                    class="auth-btn control-btn-group primary"
                    style="display: none"
                  >
                    ÏàòÏ†ï
                  </button>
                  <button
                    id="popup-delete-btn"
                    class="auth-btn control-btn-group secondary"
                    style="display: none"
                  >
                    ÏÇ≠Ï†ú
                  </button>
                </div>
              </div>
              <!-- ÌåùÏóÖ ÎÇ¥Î∂Ä Ïö∞Ï∏° [ÎÇ¥Ïö©]-->
              <div id="popup-description" class="popup-meta-description"></div>
              <!-- ÌåùÏóÖ ÎÇ¥Î∂Ä Ïö∞Ï∏° [Îã¨Î†•/ÎÇ†Ïßú]-->
              <div id="popup-date" class="popup-meta">
                <i class="icon">üìÖ</i>
              </div>
              <!-- ÌåùÏóÖ ÎÇ¥Î∂Ä Ïö∞Ï∏° [Ïû•ÏÜå]-->
              <div id="popup-location" class="popup-meta"></div>
              <!-- ÌåùÏóÖ ÎÇ¥Î∂Ä Ïö∞Ï∏° [ÌÉúÍ∑∏]-->
              <div id="popup-tags" class="popup-tags"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ÌöåÏõêÍ∞ÄÏûÖ Î™®Îã¨ -->
    <div id="signup-modal" class="modal" style="display: none">
      <div class="modal-content signup-modal-content">
        <h2>üíï Ìï®ÍªòÌï† Ï∂îÏñµÏùÑ ÎßåÎì§Ïñ¥Ïöî</h2>

        <form id="signup-form">
          <div class="form-group">
            <label for="signup-username">ÏÇ¨Ïö©ÏûêÎ™Ö (ÌïÑÏàò)</label>
            <input
              type="text"
              id="signup-username"
              required
              placeholder="ÏÇ¨Ïö©ÏûêÎ™ÖÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî"
            />
          </div>

          <div class="form-group">
            <label for="signup-email">Ïù¥Î©îÏùº (ÌïÑÏàò)</label>
            <input
              type="email"
              id="signup-email"
              required
              placeholder="email@example.com"
            />
          </div>

          <div class="form-group">
            <label for="signup-password">ÎπÑÎ∞ÄÎ≤àÌò∏ (ÌïÑÏàò)</label>
            <input
              type="password"
              id="signup-password"
              required
              placeholder="ÎπÑÎ∞ÄÎ≤àÌò∏Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî"
            />
          </div>

          <div class="form-group">
            <label for="signup-password-confirm">ÎπÑÎ∞ÄÎ≤àÌò∏ ÌôïÏù∏ (ÌïÑÏàò)</label>
            <input
              type="password"
              id="signup-password-confirm"
              required
              placeholder="ÎπÑÎ∞ÄÎ≤àÌò∏Î•º Îã§Ïãú ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî"
            />
          </div>

          <div class="form-group">
            <label for="signup-nickname">ÎãâÎÑ§ÏûÑ (ÏÑ†ÌÉù)</label>
            <input
              type="text"
              id="signup-nickname"
              placeholder="ÌëúÏãúÎê† ÎãâÎÑ§ÏûÑÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî"
            />
          </div>

          <div class="form-group">
            <label for="signup-phone">Ïó∞ÎùΩÏ≤ò (ÏÑ†ÌÉù)</label>
            <input type="tel" id="signup-phone" placeholder="010-0000-0000" />
          </div>

          <div class="form-group">
            <label>
              <input type="checkbox" id="signup-agree" required />
              Í∞úÏù∏Ï†ïÎ≥¥ ÏàòÏßë Î∞è Ïù¥Ïö©Ïóê ÎèôÏùòÌï©ÎãàÎã§ (ÌïÑÏàò)
            </label>
          </div>

          <div class="form-actions">
            <button type="button" id="signup-cancel">Ï∑®ÏÜå</button>
            <button type="submit" id="signup-submit">ÌöåÏõêÍ∞ÄÏûÖ</button>
          </div>
        </form>
      </div>
    </div>

    <!-- BGM ÏóÖÎ°úÎìú Î™®Îã¨ -->
    <div id="bgm-upload-modal" class="modal" style="display: none">
      <div class="modal-content bgm-upload-modal-content">
        <h2>üéµ Î∞∞Í≤ΩÏùåÏïÖ(BGM) ÏÑ§Ï†ï</h2>
        <p class="bgm-description">
          Î©îÏù∏ ÌéòÏù¥ÏßÄÏóêÏÑú Ïû¨ÏÉùÎê† Î∞∞Í≤ΩÏùåÏïÖÏùÑ ÏóÖÎ°úÎìúÌïòÏÑ∏Ïöî.
        </p>

        <form id="bgm-upload-form" enctype="multipart/form-data">
          <div class="form-group">
            <label for="bgm-file">ÏùåÏïÖ ÌååÏùº</label>
            <input type="file" id="bgm-file" accept=".mp3" required />
            <div class="bgm-file-info">
              <small>‚Ä¢ MP3 ÌååÏùºÎßå ÏßÄÏõêÎê©ÎãàÎã§</small>
              <small
                >‚Ä¢ ÌååÏùºÎ™ÖÏùÄ "ÏïÑÌã∞Ïä§Ìä∏ - Í≥°Ï†úÎ™©.mp3" ÌòïÏãùÏùÑ Í∂åÏû•Ìï©ÎãàÎã§</small
              >
            </div>
          </div>

          <div class="form-group">
            <label for="bgm-title">Í≥° Ï†úÎ™©</label>
            <input
              type="text"
              id="bgm-title"
              placeholder="ÏûêÎèôÏúºÎ°ú Ï∂îÏ∂úÎê©ÎãàÎã§"
              disabled
            />
          </div>

          <div class="form-group">
            <label for="bgm-artist">ÏïÑÌã∞Ïä§Ìä∏</label>
            <input
              type="text"
              id="bgm-artist"
              placeholder="ÏûêÎèôÏúºÎ°ú Ï∂îÏ∂úÎê©ÎãàÎã§"
              disabled
            />
          </div>

          <div class="form-actions">
            <button type="submit" id="bgm-submit">ÏóÖÎ°úÎìú</button>
            <button
              type="button"
              id="bgm-cancel"
              style="
                background-color: #eee;
                color: #333;
                border: none;
                padding: 8px 16px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
              "
              onmouseover="this.style.boxShadow='0 2px 8px rgba(128, 128, 128, 0.3)'"
              onmouseout="this.style.boxShadow='none'"
            >
              Îã´Í∏∞
            </button>
          </div>
        </form>

        <div id="bgm-current-info" class="bgm-current-section">
          <h4 class="bgm-current-title">ÌòÑÏû¨ ÏÑ§Ï†ïÎêú BGM</h4>
          <div id="bgm-current-display">Î°úÎî© Ï§ë...</div>
        </div>
      </div>
    </div>

    <!-- ÏÇ¨ÏßÑ/ÏòÅÏÉÅ Ï∂îÍ∞Ä Î™®Îã¨ -->
    <div id="media-upload-modal" class="modal" style="display: none">
      <div class="modal-content media-upload-modal-content">
        <h2>üìé ÏÇ¨ÏßÑ/ÏòÅÏÉÅ Ï∂îÍ∞Ä</h2>
        <p class="upload-description">
          ÌòÑÏû¨ Î©îÎ™®Î¶¨Ïóê ÏÉàÎ°úÏö¥ ÏÇ¨ÏßÑÏù¥ÎÇò ÏòÅÏÉÅÏùÑ Ï∂îÍ∞ÄÌï©ÎãàÎã§. (ÏµúÎåÄ 21Í∞ú)
        </p>

        <div class="upload-info">
          <div id="current-files-info">ÌòÑÏû¨ ÌååÏùº Í∞úÏàòÎ•º ÌôïÏù∏ÌïòÎäî Ï§ë...</div>
          <div id="remaining-slots-info"></div>
        </div>

        <form id="media-upload-form" enctype="multipart/form-data">
          <div class="form-group">
            <label for="media-files">ÌååÏùº ÏÑ†ÌÉù</label>
            <input
              type="file"
              id="media-files"
              name="media-files"
              accept="image/*,video/*"
              multiple
              required
            />
            <div class="upload-file-info">
              <small>‚Ä¢ Ïù¥ÎØ∏ÏßÄ: JPG, PNG, GIF, WEBP</small>
              <small>‚Ä¢ ÎèôÏòÅÏÉÅ: MP4, MOV, AVI, WEBM</small>
              <small>‚Ä¢ Ìïú Î≤àÏóê Ïó¨Îü¨ ÌååÏùºÏùÑ ÏÑ†ÌÉùÌï† Ïàò ÏûàÏäµÎãàÎã§</small>
            </div>
          </div>

          <div id="selected-files-preview" class="selected-files-preview"></div>

          <div class="form-actions">
            <button type="submit" id="media-upload-submit">ÏóÖÎ°úÎìú</button>
            <button type="button" id="media-upload-cancel">Îã´Í∏∞</button>
          </div>
        </form>
      </div>
    </div>

    <!-- ÌîåÎ†àÏù¥Î¶¨Ïä§Ìä∏ Î™®Îã¨ -->
    <div id="playlist-modal" class="modal" style="display: none">
      <div class="modal-content playlist-modal-content">
        <h2>üéµ ÌîåÎ†àÏù¥Î¶¨Ïä§Ìä∏</h2>
        <div id="playlist-container">
          <div id="playlist-list">
            <!-- ÌîåÎ†àÏù¥Î¶¨Ïä§Ìä∏ Ìï≠Î™©Îì§Ïù¥ Ïó¨Í∏∞Ïóê ÎèôÏ†ÅÏúºÎ°ú Ï∂îÍ∞ÄÎê©ÎãàÎã§ -->
          </div>
        </div>
        <div class="form-actions">
          <button type="button" id="playlist-close">Îã´Í∏∞</button>
        </div>
      </div>
    </div>

    <!-- ÎùºÏù¥Î∏åÎü¨Î¶¨ -->
    <script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.umd.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <!-- Supabase ÏÑ§Ï†ï -->
    <script>
      window.supabaseClient = supabase.createClient(
        window.SUPABASE_CONFIG.url,
        window.SUPABASE_CONFIG.anonKey
      );
      window.sbClient = window.supabaseClient;
    </script>

    <!-- Í∏∞Îä•Î≥Ñ Ïä§ÌÅ¨Î¶ΩÌä∏ -->
    <script src="dark-mode.js"></script>
    <script src="signup.js"></script>
    <script src="wedding-dday.js"></script>
    <script src="main-music-player.js"></script>
    <script src="detail-popup.js"></script>
    <script src="script.js"></script>
    <script src="admin.js"></script>
    <!-- flatpickr JS -->
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  </body>
</html>
